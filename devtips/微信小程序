
最近连续做了两个微信小程序，之前断断续续的也做过一些，很多的api组件都是摸着石头过河，边查看文档边做，满满的熟悉了，最近小程序的版本更新较快，很多的
api之前都没有用到，还有一些，虽然之前版本就有的，但是较新版本而言，变化不少，很多在以前项目中没有问题的东西到了现在这个版本就没有办法使用了，或多或少
出现一些问题，下面，我就对最近一段时间使用小程序做一个总结，将在项目中遇到的问题罗列出来，供后面需要的时候查询。


<!--垂直滚动，这里必须设置高度-->
<scroll-view scroll-y="true" style="height: 200px">
 <view style="background: red; width: 100px; height: 100px" ></view>
 <view style="background: green; width: 100px; height: 100px"></view>
 <view style="background: blue; width: 100px; height: 100px"></view>
 <view style="background: yellow; width: 100px; height: 100px"></view>
</scroll-view>
 
<!-- white-space
 normal: 正常无变化(默认处理方式.文本自动处理换行.假如抵达容器边界内容会转到下一行)
 pre: 保持HTML源代码的空格与换行,等同与pre标签
 nowrap: 强制文本在一行,除非遇到br换行标签
 pre-wrap: 同pre属性,但是遇到超出容器范围的时候会自动换行
 pre-line: 同pre属性,但是遇到连续空格会被看作一个空格
 inherit: 继承
-->
<!--水平滚动-->
<scroll-view scroll-x="true" style=" white-space: nowrap; display: flex" >
<!-- display: inline-block-->
 <view style="background: red; width: 200px; height: 100px; display: inline-block" ></view>
 <view style="background: green; width: 200px; height: 100px; display: inline-block"></view>
 <view style="background: blue; width: 200px; height: 100px; display: inline-block"></view>
 <view style="background: yellow; width: 200px; height: 100px; display: inline-block"></view>
</scroll-view>



2. 参数的传递问题
 bindViewTap: function() {
    wx.navigateTo({
      url: '../logs/logs?name=hello' 
    })
  },
  
  接收：
    onLoad: function (query) {
    this.setData({
      nickname:query.name
    });
  }
  
  3. 获取小程序唯一的openid
  
  第一步： 通过login函数获取code
  第二部：通过wx.request请求
                  var l='https://api.weixin.qq.com/sns/jscode2session?appid='+d.appid+'&secret='+d.secret+'&
                  js_code='+res.code+'&grant_type=authorization_code';  
                  
                  在回调函数里面获取到openid 
                  
                  
  4.在app里面定义函数，然后在其他页面需要的时候调用。
  
  eg： function test（arguments){
   console.log(arguments)
   }
   
  在其他地方调用的时候，需要引用app，然后调用函数  app.test(xxxx)
  这样的话就能调用
  
  
  5.在小程序里面使用switch函数，
  
  
  6.小程序解析富文本的问题
  
  
  
  7. 小程序的我视频播放问题\
  
  
  8.在小程序使用switch 语句块的时候，如果switch里面参数是数字的话需要转化为parseInt（）类型才能进行执行，不然的话是执行不下去的。
  
  
  9.小程序通过缓存实现搜索或者历史记录的展示功能
    tips：入股是做搜索历史记录的话，就需要在搜索成功的回调函数里面去做，便于取得成功的值，如果是浏览记录的话，就在浏览页被加载的时候做。
   var histoty = [];
          var x = wx.getStorageSync('histoty'); // 取出缓存数据
          if (x == '') {
            var x = [];
            var ky = that.data.inputValue;
            x.push(ky);
            wx.setStorageSync('histoty', x);  // 判断缓存数据为空的情况，新增加缓存
          } else {
            x.push(that.data.inputValue);
            wx.setStorageSync('histoty', x);   // 如果缓存数据不为空的话，将现在的数据pus到以前的，并存到缓存里面。
          }
          
          
 10. 小程序处理字符串问题
 
 有时候在列表中需要对过于长的字符串进行截取处理，但是由不能直接在{{}}中进行运算，所以只有在成功回调函数中循环需要截取的这个字符串
 
    for (var i = 0; i < that.data.productList.length; i++) {
            var obj = {};
            var str = that.data.productList[i].goods_name;
            var key = 'productList[' + i + '].goods_name';
            if (str.length > 6) {
              str = str.substr(0, 6) + "...";
            }
            obj[key] = str;
            that.setData(obj)
          }
          
          
         通过这样的方法，就能将这个截取后的字符串放到原来返回值的数组里面去了，关键点是这里的 var key = 'productList[' + i + '].goods_name';
         一定要和原来的数组返回值保持一致，不然的在data中就出现了两个不同的值。

